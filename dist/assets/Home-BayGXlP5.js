import{g as c,o as b,a as I,h as m,s as p,r as k,b as l,c as v,d as w,e as s,f as d,w as h,i as r,F as N,j as i,k as f,p as y,l as C}from"./index-DTOr8pt5.js";import{N as S}from"./Navbar-SVwsBhKZ.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U="/assets/busklogo-BGNZ-wed.png",V={name:"Navigation",components:{Navbar:S},data(){return{isLoggedIn:!1,uid:""}},mounted(){window.addEventListener("beforeunload",this.handleBeforeUnload)},created(){const o=c(i);b(o,t=>{t?(console.log(t),this.isLoggedIn=!0,this.uid=t.uid,console.log("nav uid",this.uid)):(this.isLoggedIn=!1,this.logout())})},methods:{async handleBeforeUnload(o){if(c().currentUser)try{await this.logout()}catch(e){console.log(e)}o.preventDefault(),o.returnValue=""},beforeUnmount(){window.removeEventListener("beforeunload",this.handleBeforeUnload)},logout(){const o=I(i),t=m(o,"logout"),u=m(o,"staffLogout");console.log(this.uid),this.uid==="afMWnPNYX6ZT5PA63RP8kyE3XZi1"?u().then(e=>{console.log("result from staff logout:",e),p(c(i)).then(()=>{this.$router.push("/"),console.log("logged out from getAuth")})}).catch(e=>{const n=e.code,a=e.message;console.log(n),console.log(a)}):(console.log("user logout"),t({uid:this.uid}).then(e=>{console.log("result:",e),p(c(i)).then(()=>{this.$router.push("/"),console.log("logged out")})}).catch(e=>{const n=e.code,a=e.message;console.log(n),console.log(a)}))}}},_=o=>(y("data-v-09ac7fbc"),o=o(),C(),o),A={class:"main-container"},E={class:"content-and-logo"},F={class:"text-container"},M=_(()=>s("h1",null,"Busker's Brightest",-1)),P=_(()=>s("h2",null,"Bar Queue System",-1)),Z={class:"links-container"},D={class:"navigation"},T=_(()=>s("div",{class:"logo-container"},[s("img",{src:U,alt:"Busker's Brightest Logo",class:"logo"})],-1));function X(o,t,u,e,n,a){const L=k("navbar"),g=k("router-link");return l(),v(N,null,[w(L),s("div",A,[s("div",E,[s("div",F,[M,P,s("div",Z,[n.isLoggedIn?r("",!0):(l(),d(g,{key:0,to:"/login",class:"router-link"},{default:h(()=>[f("Log in")]),_:1})),n.isLoggedIn?r("",!0):(l(),d(g,{key:1,to:"/registration",class:"router-link"},{default:h(()=>[f("Sign up")]),_:1})),n.isLoggedIn?r("",!0):(l(),d(g,{key:2,to:"/stafflogin",class:"router-link"},{default:h(()=>[f("Staff Login")]),_:1}))])]),s("div",D,[n.isLoggedIn?(l(),v("button",{key:0,onClick:t[0]||(t[0]=(...B)=>a.logout&&a.logout(...B)),class:"nav-button"},"Logout")):r("",!0)]),T])])],64)}const O=x(V,[["render",X],["__scopeId","data-v-09ac7fbc"]]);export{O as default};
