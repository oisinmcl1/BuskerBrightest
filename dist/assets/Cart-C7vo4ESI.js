import{g as m,b as i,c as l,e,F as p,q as h,t as d,u as f,p as _,l as y}from"./index-DTOr8pt5.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const g={props:["cart"],methods:{removeItemFromCart(t){this.$emit("removeItemFromCart",t)},async confirmCart(){try{const s=m().currentUser;if(!s){console.error("User not authenticated.");return}for(const r of this.cart){const{name:c,price:n,customerKey:a}=r;if(console.log(r),!c||!n||!a){console.error("Incomplete data for product:",r);continue}const o={uid:s.uid,name:c,price:n,customerKey:a};await fetch("https://us-central1-virtual-queue-app2.cloudfunctions.net/postcomment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}console.log("Items added to database successfully"),this.copyCartToOrders().then(async r=>{console.log(r),this.clearCart().then(async c=>{this.$router.push({path:"/orderConfirmation"}),console.log(c)})})}catch(t){console.error("Error confirming cart:",t)}},async copyCartToOrders(){try{await fetch("https://us-central1-virtual-queue-app2.cloudfunctions.net/copyCartToOrders",{method:"POST"}),console.log("Cart copied to orders in progress successfully")}catch(t){console.error("Error copying cart to oreders in progress:",t)}},async clearCart(){try{await fetch("https://us-central1-virtual-queue-app2.cloudfunctions.net/clearCart",{method:"POST"}),console.log("Cart cleared successfully")}catch(t){console.error("Error clearing cart:",t),console.log(t)}}}},v=t=>(_("data-v-dd50cd35"),t=t(),y(),t),I={class:"cart-container"},S=v(()=>e("h1",{class:"cart-title"},"Your Cart",-1)),b={class:"cart-items"},k={class:"cart-item-info"},O={class:"cart-item-name"},T={class:"cart-item-price"},$=["onClick"],q={class:"cart-actions"};function F(t,s,r,c,n,a){return i(),l("div",I,[S,e("div",b,[(i(!0),l(p,null,h(r.cart,(o,u)=>(i(),l("div",{key:u,class:"cart-item"},[e("div",k,[e("h3",O,d(o.name),1),e("div",T,d(o.price),1)]),e("div",{class:"cart-item-image",style:f({backgroundImage:`url(${o.image})`})},null,4),e("button",{onClick:w=>a.removeItemFromCart(o),class:"remove-item-btn"},"Remove from cart",8,$)]))),128))]),e("div",q,[e("button",{class:"confirm-cart-btn",onClick:s[0]||(s[0]=o=>a.confirmCart())},"Confirm Cart")])])}const x=C(g,[["render",F],["__scopeId","data-v-dd50cd35"]]);export{x as default};
